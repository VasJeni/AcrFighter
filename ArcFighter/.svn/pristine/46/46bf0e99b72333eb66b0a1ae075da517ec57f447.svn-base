program EnglishProject;

uses
	sysutils, wingraph, wincrt;

type
	//TRussianCodeType = (приветствие, властный, обаятельный, запущенный, прожорливый, наслаждаться, непреднамеренный);
	//TEnglishCodeType = (salutation, imperious, winsome, squalid, voracious, relish, unwitting);

	TCoord = record
		x,y : real;		
	end;

	TWordType = record
		Position: TCoord;
		Speed: TCoord;
		//RussianCode: TRussianCodeType;
		//EnglishCode: TEnglishCodeType;
	end;

var
	FlyingWord: TWordType;
	RussianWords: array [0..6] of string = ('приветствие', 'властный', 'обаятельный', 'запущенный', 'прожорливый', 'наслаждаться', 'непреднамеренный');
	EnglishWords: array [0..6] of string = ('salutation', 'imperious', 'winsome', 'squalid', 'voracious', 'relish', 'unwitting');

procedure StartGraphics();
var
	gm,gd: smallInt;
begin
	gd := Nopalette;	
	gm := m800x600;
	InitGraph(gd,gm, '');
end;

procedure DrawBackGround();
begin
	// Sky
	setfillstyle(SolidFill, lightblue);
	bar(0, 0, 800, 450);
	
	// Land
	setfillstyle(SolidFill, lightgreen);
	bar(0, 450, 800, 600);
end;


procedure DrawFlyingWord(x, y: integer);
begin

	//setfillstyle(SolidFill, darkgreen);
	//Bar(x,y, x+32,y+15);
	setcolor(white);
	OutTextXY(x, y, RussianWords[1]);
end;

procedure DrawStaticWord(x, y, i: integer);
begin

	setcolor(white);
	OutTextXY(x, y, inttostr(i) + ' ' + EnglishWords[i]);
end;


var
	Isquit: boolean;
	IsCorrect:boolean;


function Keyboard() : boolean;
var
	button: char;
	i: integer;
begin

	Isquit := false;
	Result := true;

	if (keypressed()) then
	begin
		button := readkey();

		//if (button = chr(27)) then
		if (button = 'q') then
		begin
			Isquit := true;
			exit;
		end
		else
		begin
			if (button = '1') then
			begin
				Result:= true;
				FlyingWord.Position.x := 900;
				FlyingWord.Speed.y := 0;
			end
			else
			begin
				Result:= false;
				FlyingWord.Position.x := 900;
				FlyingWord.Speed.y := 0;

			end;
		end;
	end;	
end;

var
	tmp : longword;
	i: integer;

begin
	randomize();
	
	StartGraphics();

	FlyingWord.Position.x := 340;
	FlyingWord.Position.y := 10;
	FlyingWord.Speed.x := 0;
	FlyingWord.Speed.y := 1;

	UpdateGraph(UpdateOff);

	readkey();

	UpdateGraph(UpdateNow);


	while (FlyingWord.Position.y < 450) do

	begin
			
		ClearDevice();
		DrawBackGround;


		DrawStaticWord(40,500, 1);
		DrawStaticWord(240,500, 2);
		DrawStaticWord(440,500, 3);
		DrawStaticWord(640,500, 4);

		DrawFlyingWord(
			round(FlyingWord.Position.x),
			round(FlyingWord.Position.y)
			);



		FlyingWord.Position.x := FlyingWord.Position.x + FlyingWord.Speed.x;
		FlyingWord.Position.y := FlyingWord.Position.y + FlyingWord.Speed.y;



        if (keypressed()) then // или даже if IsCorrect then
		begin
			break;
		end;

	UpdateGraph(UpdateNow);
	Delay(20);
	end;

	IsCorrect:=Keyboard(); 
	if IsCorrect then
	begin
		setcolor(green);
		OutTextXY(340, 300, 'CORRECT!');
	end
	else 
	begin
		setcolor(red);
		OutTextXY(340, 300, 'SORRY!');
	end;
	UpdateGraph(UpdateNow);
	Delay(20);
 // 

	ClearDevice();
	DrawBackGround;
	UpdateGraph(UpdateNow);
	FlyingWord.Position.x := 900;
	
	setcolor(red);
	OutTextXY(340, 300, 'SORRY!');
	readkey();
	CloseGraph();
end.