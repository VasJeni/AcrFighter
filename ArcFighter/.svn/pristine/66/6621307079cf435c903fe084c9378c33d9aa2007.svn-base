program progimage;

uses
	wingraph,wincrt;

type


	TCoord = record
		x,y : real;		
	end;

	TFruitType = record
		Position: TCoord;
		Speed: TCoord;
	end;

var
	carrot: TFruitType;
	pineapple : TFruitType;

procedure StartGraphics();
var
	gm,gd: smallInt;
begin
	gd := Nopalette;	
	gm := m800x600;
	InitGraph(gd,gm, '');
end;

procedure DrawCarrot(x, y: integer);
begin


	setfillstyle(SolidFill, green);
	SetColor(green);
	//FillEllipse(95, 60, 3, 15);
	FillEllipse(x, y, 3, 15);
	Line(x+2, y+10, x+20, y-15);
	Line(x-2, y+10, x+10, y-15);
	
	SetColor(orange);
	SetFillStyle(SolidFill, orange);
	PieSlice(x-5, y+40, 60, 100, 30);

	setfillstyle(SolidFill, brown);
	SetColor(brown);
	Line (x-5,y+30, x-2,y+30);
	Line (x-7,y+25, x-4,y+25);
	Line (x-5,y+20, x-2,y+20);
	Line (x-7,y+17, x-4,y+17);
	Line (x-5,y+12, x-2,y+12);
	Line (x-4,y+17, x,y+17);
	Line (x-2,y+12, x+1,y+12);
end;

procedure DrawPineApple(x, y: integer);
begin
	SetColor(SlateGray);
	setfillstyle(SolidFill, SlateGray);
	FillEllipse(x, y+9, 5,2);

	SetColor(DarkGreen);
	setfillstyle(SolidFill, olivedrab);
	FillEllipse(x-5, y-8, 5,2);
	FillEllipse(x+5, y-8, 5,2);
	FillEllipse(x-4, y-12, 4,2);
	FillEllipse(x+4, y-12, 4,2);
	FillEllipse(x, y-8, 3,10);


	SetColor(DarkGreen);
	setfillstyle(SolidFill, goldenrod);
	// PieSlice(400,300, 0, 180, 75);
	FillEllipse(x, y, 6,9);

	FillEllipse(x,y-6, 2,3);

	FillEllipse(x+4,y-1, 2,3);
	FillEllipse(x,y-1, 2,3);
	FillEllipse(x-4,y-1, 2,3);

	FillEllipse(x+2,y+4, 2,3);
	FillEllipse(x-2,y+4, 2,3);
end;

var
	tmp : longword;
	i: integer;

//
// Main procedure
//
begin

	randomize();
	
	StartGraphics();

	carrot.Position.x := 100;
	carrot.Position.y := 0;
	carrot.Speed.x := 0;
	carrot.Speed.y := 2;

	pineapple := carrot;
	pineapple.Position.x := 400;
	pineapple.Speed.y := 1.5;

	UpdateGraph(UpdateOff);

	//SunsY := 500;

	readkey();

	//DrawSun(round(aldebaran.x), round(aldebaran.y), aldebaran.Color);

	UpdateGraph(UpdateNow);

	//for i := 1 to 40 do
	//while (sunYarray[3] > 0) do
	while (true) do
	begin
			
		ClearDevice();

		DrawPineApple(
			round(pineapple.Position.x),
			round(pineapple.Position.y)
			);

		DrawCarrot(
			round(carrot.Position.x),
			round(carrot.Position.y)
			);

		UpdateGraph(UpdateNow);

		Delay(20); // 

		carrot.Position.x := carrot.Position.x + carrot.Speed.x;
		carrot.Position.y := carrot.Position.y + carrot.Speed.y;

		pineapple.Position.y := pineapple.Position.y + pineapple.Speed.y;
		
		
		if (keypressed()) then
		begin
			break;
		end;
	end;

	readkey();
	CloseGraph();
end.