program prog_;

uses
	sysutils, wingraph, wincrt;

type
	//TRussianCodeType = (приветствие, властный, обаятельный, запущенный, прожорливый, наслаждаться, непреднамеренный);
	//TEnglishCodeType = (salutation, imperious, winsome, squalid, voracious, relish, unwitting);

	TCoord = record
		x,y : real;		
	end;

	TWordType = record
		Position: TCoord;
		Speed: TCoord;
		//RussianCode: TRussianCodeType;
		//EnglishCode: TEnglishCodeType;
	end;

var
	FlyingWord: TWordType;
	RussianWords: array [0..6] of string = ('приветствие', 'властный', 'обаятельный', 'запущенный', 'прожорливый', 'наслаждаться', 'непреднамеренный');
	EnglishWords: array [0..6] of string = ('salutation', 'imperious', 'winsome', 'squalid', 'voracious', 'relish', 'unwitting');

procedure StartGraphics();
var
	gm,gd: smallInt;
begin
	gd := Nopalette;	
	gm := m800x600;
	InitGraph(gd,gm, '');
end;

procedure DrawBackGround();
begin
	// Sky
	setfillstyle(SolidFill, lightblue);
	bar(0, 0, 800, 450);
	
	// Land
	setfillstyle(SolidFill, lightgreen);
	bar(0, 450, 800, 600);
end;


procedure DrawFlyingWord(x, y: integer);
begin

	//setfillstyle(SolidFill, darkgreen);
	//Bar(x,y, x+32,y+15);
	setcolor(white);
	OutTextXY(x, y, 'WORD');
end;

procedure DrawStaticWord(x, y, i: integer);
begin

	setcolor(white);
	OutTextXY(x, y, inttostr(i) +' WORD');
end;


var
	Isquit: boolean;


procedure Keyboard();
var
	button: char;
	i: integer;
begin

	Isquit := false;

	if (keypressed()) then
	begin
		button := readkey();

		//if (button = chr(27)) then
		if (button = 'q') then
		begin
			Isquit := true;
			exit;
		end;
	end;	
end;

var
	tmp : longword;
	i: integer;

begin
	randomize();
	
	StartGraphics();

	FlyingWord.Position.x := 400;
	FlyingWord.Position.y := 10;
	FlyingWord.Speed.x := 0;
	FlyingWord.Speed.y := 1;

	UpdateGraph(UpdateOff);

	readkey();

	UpdateGraph(UpdateNow);

	while (true) do
	begin
			

		ClearDevice();

		
		
		Keyboard();

		if (Isquit) then
		begin
			break;
		end;
	end;

	while (FlyingWord.Position.y < 450) do

	begin
			
		ClearDevice();
		DrawBackGround;
		Keyboard;
		if (Isquit) then
		begin
			break;
		end;

		DrawStaticWord(100,500, 1);
		DrawStaticWord(300,500, 2);
		DrawStaticWord(500,500, 3);
		DrawStaticWord(700,500, 4);

		DrawFlyingWord(
			round(FlyingWord.Position.x),
			round(FlyingWord.Position.y)
			);

		UpdateGraph(UpdateNow);

		Delay(20); // 

		FlyingWord.Position.x := FlyingWord.Position.x + FlyingWord.Speed.x;
		FlyingWord.Position.y := FlyingWord.Position.y + FlyingWord.Speed.y;

	end;

	exit;

	readkey();
	CloseGraph();
end.